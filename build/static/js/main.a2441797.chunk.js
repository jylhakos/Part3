(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{19:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(1),c=t.n(o),a=t(14),l=t.n(a),s=(t(19),t(3)),r=t(0),i=function(e){var n=e.addPerson,t=e.newName,o=e.handleNameChange,c=e.newPhone,a=e.handlePhoneChange;return Object(r.jsxs)("form",{onSubmit:n,children:[Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Name: "}),Object(r.jsx)("input",{value:t,onChange:o})]}),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Phone: "}),Object(r.jsx)("input",{value:c,onChange:a})]})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"Add"})})]})},d=function(e){var n=e.id,t=e.person,o=e.phone,c=e.handleDeletePerson;return console.log("person",t,"phone",o,"id",n),null!=t?Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:t})," ",Object(r.jsx)("td",{children:o})," ",Object(r.jsx)("td",{children:Object(r.jsx)("button",{type:"submit",value:n,onClick:function(e){return c(e,t)},children:"Delete"})})]}):null},u=function(e){e.persons;var n=e.filtered,t=e.handleDeletePerson;return Object(r.jsx)("div",{style:{padding:5},children:Object(r.jsx)("table",{children:n.map((function(e){return Object(r.jsx)(d,{id:e.id,person:e.name,phone:e.phone,handleDeletePerson:t},e.id)}))})})},h=function(e){var n=e.persons,t=e.handleFilter;return console.log("person",n.name),Object(r.jsxs)("div",{children:[Object(r.jsx)("label",{children:"Filter: "}),Object(r.jsx)("input",{value:n.name,onChange:t})]})},j=t(4),b=t.n(j),O="/api/persons",p=function(){return b.a.get(O)},g=function(e){return b.a.post(O,e)},f=function(e,n){return b.a.put("".concat(O,"/").concat(e),n)},x=function(e){return b.a.delete("".concat(O,"/").concat(e))},v=function(e){var n=e.successMessage;return null===n?null:Object(r.jsx)("div",{className:"success",children:n})},m=function(){var e=Object(o.useState)([{person:null,phone:null}]),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(o.useState)(""),l=Object(s.a)(a,2),d=l[0],j=l[1],b=Object(o.useState)(""),O=Object(s.a)(b,2),m=O[0],P=O[1],w=Object(o.useState)(0),C=Object(s.a)(w,2),D=C[0],S=C[1],N=Object(o.useState)(null),k=Object(s.a)(N,2),E=k[0],y=k[1],F=Object(o.useState)([]),A=Object(s.a)(F,2),M=A[0],I=A[1];Object(o.useEffect)((function(){p().then((function(e){console.log(e.data),c(e.data),I(e.data);var n=0;e.data.forEach((function(e){console.log(e.id),e.id>n&&(n=e.id)})),S(n)}))}),[]),console.log("counter",D);var J=function(e){e.preventDefault();var n,o=e.target.value.toLowerCase();console.log("value",o),n=t.filter((function(e){return console.log("person.name",e.name),-1!==e.name.toLowerCase().indexOf(o)})),I(n)};return Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(v,{successMessage:E}),Object(r.jsx)(h,{persons:t,handleFilter:J}),Object(r.jsx)("h3",{children:"Add New"}),Object(r.jsx)(i,{addPerson:function(e){e.preventDefault(),console.log("Clicked",e.target);var n={name:d,phone:m,date:(new Date).toISOString()};console.log("personObject",n.name,n.phone),console.log("persons",t);var o=t.filter((function(e){return e.name===n.name}));console.log("personExists ",o),0===o.length?(console.log("personExists.length ",o.length),g(n).then((function(e){console.log("response",e),console.log("response.id",e.data.id),n.id=e.data.id,c(t.concat(e.data)),I(t.concat(e.data)),S(n.id),y("Added ".concat(n.name)),setTimeout((function(){y(null)}),5e3)}))):(console.log("personExists[0].id",o[0].id),f(o[0].id,n).then((function(e){p().then((function(e){c(e.data),I(e.data)})),alert("".concat(o[0].name," phone ").concat(o[0].phone," was changed"))}))),j(""),P("")},newName:d,handleNameChange:function(e){console.log("handleNameChange",e.target.value),j(e.target.value)},newPhone:m,handlePhoneChange:function(e){console.log("handlePhoneChange",e.target.value),P(e.target.value)}}),Object(r.jsx)("h2",{children:"Numbers"}),Object(r.jsx)(u,{persons:t,filtered:M,handleFilter:J,handleDeletePerson:function(e,n){e.preventDefault();var t=e.target.value;console.log("handleDeletePerson",t,n),window.confirm("Delete "+n+"?")&&x(t).then((function(e){p().then((function(e){c(e.data),I(e.data)}))}))}})]})};l.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.a2441797.chunk.js.map