{"version":3,"sources":["components/PersonForm.js","components/Person.js","components/Persons.js","components/Filter.js","services/personService.js","App.js","index.js"],"names":["PersonForm","addPerson","newName","handleNameChange","newPhone","handlePhoneChange","onSubmit","value","onChange","type","Person","id","person","phone","handleDeletePerson","console","log","onClick","e","Persons","persons","filtered","style","padding","map","name","Filter","handleFilter","baseUrl","axios","get","newObject","post","put","delete","Notification","successMessage","className","App","useState","setPersons","setNewName","setNewPhone","counter","setCounter","setSuccessMessage","setFiltered","useEffect","personService","then","response","data","max","forEach","object","event","preventDefault","result","target","toLowerCase","filter","indexOf","personObject","date","Date","toISOString","personExists","length","concat","setTimeout","alert","window","confirm","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"8LAoBeA,EAlBI,SAAC,GAA2E,IAAzEC,EAAwE,EAAxEA,UAAWC,EAA6D,EAA7DA,QAASC,EAAoD,EAApDA,iBAAkBC,EAAkC,EAAlCA,SAAUC,EAAwB,EAAxBA,kBAEpE,OACC,uBAAMC,SAAUL,EAAhB,UACG,gCACE,gCACE,2CAAqB,uBAAOM,MAAOL,EAASM,SAAUL,OAExD,gCACE,4CAAsB,uBAAOI,MAAOH,EAAUI,SAAUH,UAI1D,8BAAK,wBAAQI,KAAK,SAAb,uBCJEC,EATA,SAAC,GAA+C,IAA7CC,EAA4C,EAA5CA,GAAIC,EAAwC,EAAxCA,OAAQC,EAAgC,EAAhCA,MAAOC,EAAyB,EAAzBA,mBAInC,OAFAC,QAAQC,IAAI,SAAUJ,EAAQ,QAASC,EAAO,KAAMF,GAGtC,MAAVC,EAAmB,+BAAI,6BAAKA,IAAT,IAAsB,6BAAKC,IAA3B,IAAuC,6BAAI,wBAAQJ,KAAK,SAASF,MAAOI,EAAIM,QAAS,SAACC,GAAD,OAAOJ,EAAmBI,EAAEN,IAAtE,yBAA6G,MCQlKO,EAZC,SAAC,GAA8C,EAA5CC,QAA6C,IAApCC,EAAmC,EAAnCA,SAAUP,EAAyB,EAAzBA,mBAEpC,OACE,qBAAKQ,MAAO,CAACC,QAAQ,GAArB,SACE,gCACIF,EAASG,KAAI,SAAAZ,GAAM,OAAI,cAAC,EAAD,CAAwBD,GAAIC,EAAOD,GAAIC,OAAQA,EAAOa,KAAMZ,MAAOD,EAAOC,MAAOC,mBAAoBA,GAAxFF,EAAOD,YCMtCe,EAXA,SAAC,GAA+B,IAA7BN,EAA4B,EAA5BA,QAASO,EAAmB,EAAnBA,aAIzB,OAFAZ,QAAQC,IAAI,SAAUI,EAAQK,MAGxB,gCACE,6CAAuB,uBAAOlB,MAAOa,EAAQK,KAAMjB,SAAUmB,Q,gBCAjEC,EAAU,eA8BD,EAhBA,WACb,OAAOC,IAAMC,IAAIF,IAeJ,EAZA,SAAAG,GACb,OAAOF,IAAMG,KAAKJ,EAASG,IAWd,EARA,SAACpB,EAAIoB,GAClB,OAAOF,IAAMI,IAAN,UAAaL,EAAb,YAAwBjB,GAAMoB,IAOxB,EAJM,SAACpB,GACpB,OAAOkB,IAAMK,OAAN,UAAgBN,EAAhB,YAA2BjB,KCvB9BwB,EAAe,SAAC,GAAsB,IAArBC,EAAoB,EAApBA,eACrB,OAAwB,OAAnBA,EACI,KAIP,qBAAKC,UAAU,UAAf,SACGD,KAuLQE,EAlLH,WAEV,MAAgCC,mBAAS,CAAC,CAAE3B,OAAQ,KAAMC,MAAO,QAAjE,mBAAQO,EAAR,KAAiBoB,EAAjB,KAEA,EAAgCD,mBAAS,IAAzC,mBAAQrC,EAAR,KAAiBuC,EAAjB,KAEA,EAAkCF,mBAAS,IAA3C,mBAAQnC,EAAR,KAAkBsC,EAAlB,KAEA,EAAgCH,mBAAS,GAAzC,mBAAQI,EAAR,KAAiBC,EAAjB,KAEA,EAA4CL,mBAAS,MAArD,mBAAOH,EAAP,KAAuBS,EAAvB,KAEA,EAAgCN,mBAAS,IAAzC,mBAAOlB,EAAP,KAAiByB,EAAjB,KAEAC,qBAAU,WACRC,IAEGC,MAAK,SAAAC,GACJnC,QAAQC,IAAIkC,EAASC,MACrBX,EAAWU,EAASC,MACpBL,EAAYI,EAASC,MACrB,IAAIC,EAAM,EACVF,EAASC,KAAKE,SAAQ,SAACC,GACrBvC,QAAQC,IAAIsC,EAAO3C,IAChB2C,EAAO3C,GAAKyC,IACbA,EAAME,EAAO3C,OAIjBiC,EAAWQ,QAId,IAEHrC,QAAQC,IAAI,UAAW2B,GAEvB,IAAMhB,EAAe,SAAC4B,GAEpBA,EAAMC,iBAEN,IAEIC,EAFAlD,EAAQgD,EAAMG,OAAOnD,MAAMoD,cAI/B5C,QAAQC,IAAI,QAAST,GAErBkD,EAASrC,EAAQwC,QAAO,SAAChD,GAIvB,OAFAG,QAAQC,IAAI,cAAeJ,EAAOa,OAEmB,IAA9Cb,EAAOa,KAAKkC,cAAcE,QAAQtD,MAI3CuC,EAAYW,IA8GZ,OACE,gCACE,2CACA,cAAC,EAAD,CAAcrB,eAAgBA,IAC9B,cAAC,EAAD,CAAQhB,QAASA,EAASO,aAAcA,IACxC,yCACA,cAAC,EAAD,CAAY1B,UAhHA,SAACsD,GAEfA,EAAMC,iBAENzC,QAAQC,IAAI,UAAWuC,EAAMG,QAE7B,IAAMI,EAAe,CACnBrC,KAAMvB,EACNW,MAAOT,EACP2D,MAAM,IAAIC,MAAOC,eAGnBlD,QAAQC,IAAI,eAAgB8C,EAAarC,KAAMqC,EAAajD,OAE5DE,QAAQC,IAAI,UAAWI,GAEvB,IAAM8C,EAAe9C,EAAQwC,QAAO,SAAChD,GAAD,OAAYA,EAAOa,OAASqC,EAAarC,QAE7EV,QAAQC,IAAI,gBAAiBkD,GAED,IAAxBA,EAAaC,QAEfpD,QAAQC,IAAI,uBAAwBkD,EAAaC,QAMjDnB,EAAqBc,GACpBb,MAAK,SAAAC,GAEJnC,QAAQC,IAAI,WAAYkC,GAExBnC,QAAQC,IAAI,cAAekC,EAASC,KAAKxC,IAGzCmD,EAAanD,GAAKuC,EAASC,KAAKxC,GAEhC6B,EAAWpB,EAAQgD,OAAOlB,EAASC,OAEnCL,EAAY1B,EAAQgD,OAAOlB,EAASC,OAEpCP,EAAWkB,EAAanD,IAExBkC,EAAkB,SAAD,OAAUiB,EAAarC,OAExC4C,YAAW,WACTxB,EAAkB,QACjB,UAML9B,QAAQC,IAAI,qBAAsBkD,EAAa,GAAGvD,IAGlDqC,EAAqBkB,EAAa,GAAGvD,GAAGmD,GACvCb,MAAK,SAAAC,GACFF,IAECC,MAAK,SAAAC,GACJV,EAAWU,EAASC,MACpBL,EAAYI,EAASC,SAGzBmB,MAAM,GAAD,OAAIJ,EAAa,GAAGzC,KAApB,kBAAkCyC,EAAa,GAAGrD,MAAlD,qBAIT4B,EAAW,IACXC,EAAY,KAyCwBxC,QAASA,EAASC,iBAtC/B,SAACoD,GACxBxC,QAAQC,IAAI,mBAAoBuC,EAAMG,OAAOnD,OAC7CkC,EAAWc,EAAMG,OAAOnD,QAoCkEH,SAAUA,EAAUC,kBAjCtF,SAACkD,GACzBxC,QAAQC,IAAI,oBAAqBuC,EAAMG,OAAOnD,OAC9CmC,EAAYa,EAAMG,OAAOnD,UAgCvB,yCACA,cAAC,EAAD,CAASa,QAASA,EAASC,SAAUA,EAAUM,aAAcA,EAAcb,mBA9BpD,SAACyC,EAAM3C,GAEhC2C,EAAMC,iBAEN,IAAM7C,EAAK4C,EAAMG,OAAOnD,MAExBQ,QAAQC,IAAI,qBAAsBL,EAAIC,GAElC2D,OAAOC,QAAQ,UAAY5D,EAAS,MAEtCoC,EAA2BrC,GAC1BsC,MAAK,SAAAC,GACJF,IAECC,MAAK,SAAAC,GACJV,EAAWU,EAASC,MACpBL,EAAYI,EAASC,mBCnLjCsB,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.a2441797.chunk.js","sourcesContent":["import React from 'react'\n\nconst PersonForm = ({ addPerson, newName, handleNameChange, newPhone, handlePhoneChange }) => {\n\n  return ( \n  \t<form onSubmit={addPerson}>\n      <div>\n        <div>\n          <label>Name: </label><input value={newName} onChange={handleNameChange}/>\n        </div>\n        <div>\n          <label>Phone: </label><input value={newPhone} onChange={handlePhoneChange}/>\n        </div>\n        \n        </div>\n        <div><button type=\"submit\">Add</button></div>\n      </form>\n    )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Person = ({ id, person, phone, handleDeletePerson }) => {\n\n  console.log('person', person, 'phone', phone, 'id', id)\n\n  return ( \n      person != null ? ( <tr><td>{person}</td> <td>{phone}</td> <td><button type=\"submit\" value={id} onClick={(e) => handleDeletePerson(e,person)}>Delete</button></td></tr> ) : null\n      )\n}\n\nexport default Person","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({ persons, filtered, handleDeletePerson }) => {\n\n  return (  \n    <div style={{padding:5}}>\n      <table>\n        { filtered.map(person => <Person key={person.id} id={person.id} person={person.name} phone={person.phone} handleDeletePerson={handleDeletePerson}/> )}\n      </table>\n    </div>\n    )\n\n}\n\nexport default Persons","import React from 'react'\nimport Person from './Person'\n\nconst Filter = ({ persons, handleFilter }) => {\n\n  console.log('person', persons.name)\n\n  return ( \n        <div>\n          <label>Filter: </label><input value={persons.name} onChange={handleFilter}/>\n        </div>\n      )\n}\n\nexport default Filter","import axios from 'axios'\n//const baseUrl = 'http://localhost:3001/persons'\n// 3.9\n//const baseUrl = 'http://localhost:3001/api/persons'\n\n// 3.10\n//const baseUrl = 'https://cs-e4670.herokuapp.com/api/persons'\n\n// 3.11, 3.13, 3.14\nconst baseUrl = '/api/persons'\n\n// 3.13 \n//const baseUrl = 'http://localhost:3001/api/persons'\n\n// 3.11 \n// $ npm run build\n\n// 3.12\n// $ node --inspect index.js\n\n// 3.12\n// $ npm install mongoose\n\nconst getAll = () => {\n  return axios.get(baseUrl)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject)\n}\n\nconst deletePerson = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { \n  getAll: getAll, \n  create: create, \n  update: update,\n  deletePerson: deletePerson,\n}","// $ npx json-server --port 3001 --watch db.json\n// $ npm start\n\n// 3.16\n// $ npm run build\n\nimport React, { useState, useEffect } from 'react'\n//import axios from 'axios';\nimport PersonForm from './components/PersonForm'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport personService from './services/personService'\n\nconst Notification = ({successMessage}) => {\n  if ( successMessage === null) {\n    return null\n  }\n\n  return (\n    <div className=\"success\">\n      {successMessage}\n    </div>\n  )\n}\n\nconst App = () => {\n\n  const [ persons, setPersons ] = useState([{ person: null, phone: null }])\n\n  const [ newName, setNewName ] = useState('')\n\n  const [ newPhone, setNewPhone ] = useState('')\n\n  const [ counter, setCounter ] = useState(0)\n\n  const [successMessage, setSuccessMessage] = useState(null)\n\n  const [filtered, setFiltered] = useState([]);\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        console.log(response.data)\n        setPersons(response.data)\n        setFiltered(response.data)\n        let max = 0\n        response.data.forEach((object) => {\n          console.log(object.id);\n          if(object.id > max) {\n            max = object.id\n          }\n        });\n\n        setCounter(max)\n\n        //setCounter(response.data.length)\n      })\n  }, [])\n\n  console.log('counter', counter)\n\n  const handleFilter = (event) => {\n\n    event.preventDefault()\n\n    let value = event.target.value.toLowerCase();\n\n    let result = [];\n\n    console.log('value', value);\n\n    result = persons.filter((person) => {\n\n      console.log('person.name', person.name);\n\n      return person.name.toLowerCase().indexOf(value) !== -1;\n\n    });\n\n    setFiltered(result)\n\n  }\n\n  const addPerson = (event) => {\n\n      event.preventDefault()\n\n      console.log('Clicked', event.target)\n\n      const personObject = {\n        name: newName,\n        phone: newPhone,\n        date: new Date().toISOString(),\n      }\n\n      console.log('personObject', personObject.name, personObject.phone)\n\n      console.log('persons', persons)\n\n      const personExists = persons.filter((person) => person.name === personObject.name)\n\n      console.log('personExists ', personExists)\n\n      if (personExists.length === 0) {\n\n        console.log('personExists.length ', personExists.length)\n\n        // setPersons(persons.concat(personObject))\n\n        // $ npm install axios\n\n        personService.create(personObject)\n        .then(response => {\n\n          console.log('response', response)\n\n          console.log('response.id', response.data.id)\n\n          // 3.18\n          personObject.id = response.data.id\n\n          setPersons(persons.concat(response.data))\n\n          setFiltered(persons.concat(response.data))\n\n          setCounter(personObject.id)\n\n          setSuccessMessage(`Added ${personObject.name}`)\n\n          setTimeout(() => {\n            setSuccessMessage(null)\n          }, 5000)\n        })\n      } else {\n        // 3.3\n        //alert(`${newName} is already added to phonebook`)\n\n        console.log('personExists[0].id', personExists[0].id)\n\n        // 3.17 \n        personService.update(personExists[0].id,personObject)\n        .then(response => {\n            personService\n            .getAll()\n            .then(response => {\n              setPersons(response.data)\n              setFiltered(response.data)\n            })\n\n          alert(`${personExists[0].name} phone ${personExists[0].phone} was changed`)\n        })\n      }\n      \n      setNewName('')\n      setNewPhone('')\n    }\n\n    const handleNameChange = (event) => {\n      console.log('handleNameChange', event.target.value)\n      setNewName(event.target.value)\n    }\n\n    const handlePhoneChange = (event) => {\n      console.log('handlePhoneChange', event.target.value)\n      setNewPhone(event.target.value)\n    }\n\n    const handleDeletePerson = (event,person) => {\n\n      event.preventDefault()\n\n      const id = event.target.value;\n\n      console.log('handleDeletePerson', id, person)\n\n      if (window.confirm('Delete ' + person + '?')) {\n\n        personService.deletePerson(id)\n        .then(response => {\n          personService\n          .getAll()\n          .then(response => {\n            setPersons(response.data)\n            setFiltered(response.data)\n          })\n        })\n      }\n    }\n\n    return (\n      <div>\n        <h2>Phonebook</h2>\n        <Notification successMessage={successMessage}/>\n        <Filter persons={persons} handleFilter={handleFilter}/>\n        <h3>Add New</h3>\n        <PersonForm addPerson={addPerson} newName={newName} handleNameChange={handleNameChange} newPhone={newPhone} handlePhoneChange={handlePhoneChange}/>\n        <h2>Numbers</h2>\n        <Persons persons={persons} filtered={filtered} handleFilter={handleFilter} handleDeletePerson={handleDeletePerson}/>\n      </div>\n    )\n}\n\nexport default App\n\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}